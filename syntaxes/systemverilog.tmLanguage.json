{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "SystemVerilog",
	"scopeName": "text.systemverilog",
	"fileTypes": [".sv", ".v"],
	"foldingStartMarker": "begin",
	"foldingStopMarker": "end",
	"patterns": [
		{
			"include": "#comment"
		},
		{
			"include": "#strings"
		},
        {
            "include": "#keywords"
        },
		{
            "include": "#support"
		},
		{
            "include": "#variables"
		},
        {
            "include": "#declarations"
        },
        {
            "include": "#assignments"
        },
        {
            "include": "#instantations"
        },
		{
            "include": "#storage"
		},
		{
            "include": "#macros"
		},
		{
			"include": "#constants"
		}
	],
	"repository": {
		"keywords": {
			"patterns": [
				{
					"include": "#operators"
				},
				{
					"name": "keyword.control.procedural.systemverilog",
					"match": "\\b(initial|final|always_(comb|ff|latch))\\b"
				},
				{
					"name": "keyword.control.assignment.systemverilog",
					"match": "\\b(assign|deassign)\\b"
				},
				{
					"name": "keyword.control.selection.systemverilog",
					"match": "\\b(if|else|(end)?case(x|z)?|unique|unique0|priority)\\b"
				},
				{
					"name": "keyword.control.loop.systemverilog",
					"match": "\\b(do|while|for|foreach|repeat|forever|break|continue|return)\\b"
				},
				{
					"name": "keyword.control.parallel.systemverilog",
					"match": "\\b(fork|join|join_any|join_none|disable)\\b"
				},
				{
					"name": "keyword.control.clocking.systemverilog",
					"match": "\\b(clocking|endclocking|default|wait|wait_order|iff|posedge|negedge|edge)\\b"
                },
                {
                    "name": "keyword.control.misc.systemverilog",
                    "match": "\\b(import|extends)\\b"
                },
				{
					"name": "keyword.control.force.systemverilog",
					"match": "\\b(force|release)\\b"
				},
				{
					"name": "keyword.other.clause.systemverilog",
					"match": "\\b(begin|end)\\b"
				},
				{
					"name": "keyword.other.clause.systemverilog",
					"match": "\\b(end)?(task|function|class|program|module)\\b"
				}
			]
		},
		"strings": {
			"name": "string.quoted.double.systemverilog",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.systemverilog",
					"match": "\\\\."
				}
			]
		},
        "instantations": {
            "patterns": [
                {
                    "name": "meta.inst.package.systemverilog",
                    "match": "(\\w+)(::)",
                    "captures": {
                        "1": { "name": "entity.name.type"},
                        "2": { "name": "keyword.operator.systemverilog"}
                    }
                },
                {
                    "name": "meta.inst.variable.systemverilog",
                    "match": "^(automatic|static)?\\s+(?!release|disable)(\\w+)(?:\\s*\\[(\\d+:\\d+)\\]|\\s+)+(\\w+)(\\s+,\\s+\\w+)*\\s*;",
                    "captures": {
                        "1": { "name": "storage.modifier.systemverilog" },
                        "2": { "name": "storage.type.systemverilog" },
                        "3": { "name": "constant.numeric.systemverilog"},
                        "4": { "name": "variable.name.systemverilog"},
                        "5": { "name": "variable.name.systemverilog"}
                    }
                }
            ]
        },
		"declarations": {
			"patterns": [
                {
                    "name": "meta.declaration.class.systemverilog",
                    "match": "(class)\\s+(\\w+)(?:\\s+(extends|implements)\\s+(\\w+))?",
                    "captures": {
                        "1": { "name": "storage.type.class.systemverilog"},
                        "2": { "name": "entity.name.class.systemverilog"},
                        "3": { "name": "keyword.control.systemverilog"},
                        "4": { "name": "entity.name.class.systemverilog"}
                    }
                },
				{
					"name": "meta.declaration.function.systemverilog",
					"match": "(function|task|module|program|package)(?:\\s(static|automatic))?(\\s+\\w+)?\\s+(\\w+)\\s*[;\\(#]",
					"captures": {
						"1": { "name": "storage.type.function.systemverilog"},
						"2": { "name": "storage.modifier.systemverilog"},
						"3": { "name": "storage.type.systemverilog"},
						"4": { "name": "entity.name.function.systemverilog"}
					}
				}
			]
        },
        "assignments": {
            "patterns": [
                {
                    "name": "meta.assignment.systemverilog",
                    "match": "\\b(?:(assign|force)\\s+)?(\\w+)\\s*(\\*=|\\+=|=|\\-=|/=|%=|&=|\\|=|\\^=|<<=|<<<=|>>=|>>>=|=~)\\s*((?!\\d+\\b)(?<!\\()\\w+)?",
                    "captures": {
                        "1": { "name": "keyword.control.assign.systemverilog" },
                        "2": { "name": "variable.name.systemverilog"},
                        "3": { "name": "keyword.operator.assignment.systemverilog" },
                        "4": { "name": "variable.name.systemverilog"}
                    }
                }
            ]
        },
		"storage": {
			"patterns": [
				{
					"name": "storage.type.nets.systemverilog",
					"match": "\\b(wire|wand|wor|tri|triand|trior|tri0|tri1|trireg|supply0|supply1|uwire)\\b"
				},
				{
					"name": "storage.type.data.systemverilog",
					"match": "\\b(integer|int|longint|shortint|logic|bit|byte|real|shortreal|string|void)\\b"
				},
				{
					"name": "storage.type.parameters.systemverilog",
					"match": "\\b(parameter|localparam)\\b"
				},
				{
					"name": "storage.type.other.systemverilog",
					"match": "\\b(var|time|realtime|enum|struct|rand|randc|genvar|interconnect|event|chandle)\\b"
				},
				{
					"name": "storage.modifier.systemverilog",
					"match": "\\b(input|output|unpacked|signed|unsigned|automatic|static)\\b"
				},
				{
					"name": "storage.type.systemverilog",
					"match": "\\b(module|program|class)\\b"
				}
			]
		},
		"comment": {
			"patterns": [
				{
					"name": "comment.line.double-slash.systemverilog",
					"match": "\\/\\/.*"
				},
				{
					"name": "comment.block.systemverilog",
					"begin": "\\/\\*",
					"end": "\\*\\/"
				}
			]
		},
		"constants": {
            "patterns":[
                {
                    "name": "constant.numeric.casted.systemverilog",
                    "match": "\\b\\d+?'[hbd]([0-9a-fA-F_xz]+)\\b"
                },
                {
                    "name": "constant.numeric.decimal.systemverilog",
					"match": "\\b(\\d+)\\b"
				}
			]
		},
		"support": {
			"patterns": [
				{
					"name": "support.function.builtin.systemverilog",
					"match": "(\\$\\w+)|(?=\\w\\.)\\w+(?=\\()"
				},
				{
					"name": "meta.function.systemverilog",
                    "match": "(?:\\W\\s+|\\w\\.)(\\w+)(?=\\()",
                    "captures": {
                        "1": {"name": "support.function.systemverilog"}
                    }
				}
			]
		},
		"variables": {
			"patterns": [
				{
					"name": "variable.language.systemverilog",
					"match": "\\b(this)\\."
				},
				{
					"name": "variable.name.systemverilog",
                    "match": "(?=\\s|\\.| )(?!`)\\w+(?=\\.)"
                },
                {
                    "name": "variable.name.array.systemverilog",
                    "match": "(\\w+)(?=\\[)"
                },
                {
                    "name": "variable.name.systemverilog",
                    "match": "(?=\\.)\\w+"
                }
			]
        },
        "macros": {
            "patterns": [
                {
                    "name": "constant.character.macro.systemverilog",
                    "match": "`\\w+"
                }
            ]
        },
		"operators": {
			"patterns": [
				{
					"name": "keyword.operator.assignment.systemverilog",
					"match": "\\*=|\\+=|=|\\-=|/=|%=|&=|\\|=|\\^=|<<=|<<<=|>>=|>>>=|=~"
				},
				{
					"name": "keyword.operator.arithmetic.systemverilog",
					"match": "\\+|\\-|\\*|/|%"
				},
				{
					"name": "keyword.operator.logical.systemverilog",
					"match": "!|&&|\\|\\|"
				},
				{
					"name": "keyword.operator.relation.systemverilog",
					"match": "<|<=|>|>="
				},
				{
					"name": "keyword.operator.equality.systemverilog",
					"match": "==|===|!=|!=="
				},
				{
					"name": "keyword.operator.wildequality.systemverilog",
					"match": "=\\?=|!\\?="
				},
				{
					"name": "keyword.operator.shift.systemverilog",
					"match": "<<|>>"
				},
				{
					"name": "keyword.operator.condition.systemverilog",
					"match": "\\?"
				},
				{
					"name": "keyword.operator.event.systemverilog",
					"match": "@|#|->|->>"
				},
				{
					"name": "keyword.operator.bitwise.systemverilog",
					"match": "\\^|\\~|&|\\||\\^\\~|\\~\\^"
				}
			]
			}
	}
}